<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Simulate d value databases of primary studies — simulate_d_database • psychmeta</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Simulate d value databases of primary studies — simulate_d_database" />
<meta property="og:description" content="The simulate_d_database function generates databases of psychometric d value data from sample-size parameters, correlation parameters, mean parameters, standard deviation parameters, reliability parameters, and selection-ratio parameters.
The output database can be provided in a long format.
If composite variables are to be formed, parameters can also be defined for the weights used to form the composites as well as the selection ratios applied to the composites.
This function will return a database of statistics as well as a database of parameters - the parameter database contains the actual study parameters for each simulated sample (without sampleing error) to allow comparisons between meta-analytic results computed from the statistics and the actual means and variances of parameters.
The merge_simdat_d function can be used to merge multiple simulated databases and the sparsify_simdat_d function can be used to randomly delete artifact information (a procedure commonly done in simulations of artifact-distribution methods)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psychmeta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/artifact_corrections.html">Correcting for artifacts in meta-analyses</a>
    </li>
    <li>
      <a href="../articles/composites.html">Computing composite effect sizes and artifacts</a>
    </li>
    <li>
      <a href="../articles/dependency.html">Handling effect size dependency</a>
    </li>
    <li>
      <a href="../articles/es_conversion.html">Converting effect sizes and applying sporadic artifact corrections</a>
    </li>
    <li>
      <a href="../articles/heterogeneity.html">Heterogeneity analyses</a>
    </li>
    <li>
      <a href="../articles/import_organize.html">Importing and organizing meta-analytic data</a>
    </li>
    <li>
      <a href="../articles/ma_d.html">Meta-analyzing d values</a>
    </li>
    <li>
      <a href="../articles/ma_options.html">Meta-analysis function arguments and options</a>
    </li>
    <li>
      <a href="../articles/ma_r.html">Meta-analyzing correlations</a>
    </li>
    <li>
      <a href="../articles/matrix_regression.html">Linear regression with covariance (correlation) matrices</a>
    </li>
    <li>
      <a href="../articles/moderator_analysis.html">Moderator analyses and meta-regression</a>
    </li>
    <li>
      <a href="../articles/multivariate_range_restriction.html">Multivariate range-restriction correction</a>
    </li>
    <li>
      <a href="../articles/output_results.html">Outputing meta-analysis results to Markdown, Word, or other formats</a>
    </li>
    <li>
      <a href="../articles/overview.html">psychmeta Overview</a>
    </li>
    <li>
      <a href="../articles/plots.html">Plotting meta-analysis results</a>
    </li>
    <li>
      <a href="../articles/sensitivity.html">Sensitivity analyses</a>
    </li>
    <li>
      <a href="../articles/simulation.html">Simulating psychometric data and meta-analyses</a>
    </li>
    <li>
      <a href="../articles/workshop.html">Welcome to psychmeta!</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/psychmeta/psychmeta/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulate d value databases of primary studies</h1>
    <small class="dont-index">Source: <a href='https://github.com/psychmeta/psychmeta/blob/master/R/simulate_d.R'><code>R/simulate_d.R</code></a></small>
    <div class="hidden name"><code>simulate_d_database.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>simulate_d_database</code> function generates databases of psychometric d value data from sample-size parameters, correlation parameters, mean parameters, standard deviation parameters, reliability parameters, and selection-ratio parameters.
The output database can be provided in a long format.
If composite variables are to be formed, parameters can also be defined for the weights used to form the composites as well as the selection ratios applied to the composites.
This function will return a database of statistics as well as a database of parameters - the parameter database contains the actual study parameters for each simulated sample (without sampleing error) to allow comparisons between meta-analytic results computed from the statistics and the actual means and variances of parameters.
The <code><a href='merge_simdat_d.html'>merge_simdat_d</a></code> function can be used to merge multiple simulated databases and the <code><a href='sparsify_simdat_d.html'>sparsify_simdat_d</a></code> function can be used to randomly delete artifact information (a procedure commonly done in simulations of artifact-distribution methods).</p>
    </div>

    <pre class="usage"><span class='fu'>simulate_d_database</span><span class='op'>(</span>
  <span class='va'>k</span>,
  <span class='va'>n_params</span>,
  <span class='va'>rho_params</span>,
  mu_params <span class='op'>=</span> <span class='cn'>NULL</span>,
  sigma_params <span class='op'>=</span> <span class='fl'>1</span>,
  rel_params <span class='op'>=</span> <span class='fl'>1</span>,
  sr_params <span class='op'>=</span> <span class='fl'>1</span>,
  k_items_params <span class='op'>=</span> <span class='fl'>1</span>,
  wt_params <span class='op'>=</span> <span class='cn'>NULL</span>,
  allow_neg_wt <span class='op'>=</span> <span class='cn'>FALSE</span>,
  sr_composite_params <span class='op'>=</span> <span class='cn'>NULL</span>,
  group_names <span class='op'>=</span> <span class='cn'>NULL</span>,
  var_names <span class='op'>=</span> <span class='cn'>NULL</span>,
  composite_names <span class='op'>=</span> <span class='cn'>NULL</span>,
  diffs_as_obs <span class='op'>=</span> <span class='cn'>FALSE</span>,
  show_applicant <span class='op'>=</span> <span class='cn'>FALSE</span>,
  keep_vars <span class='op'>=</span> <span class='cn'>NULL</span>,
  decimals <span class='op'>=</span> <span class='fl'>2</span>,
  max_iter <span class='op'>=</span> <span class='fl'>100</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>k</th>
      <td><p>Number of studies to simulate.</p></td>
    </tr>
    <tr>
      <th>n_params</th>
      <td><p>List of parameter distributions (or data-generation function; see details) for subgroup sample sizes.</p></td>
    </tr>
    <tr>
      <th>rho_params</th>
      <td><p>List containing a list of parameter distributions (or data-generation functions; see details) for correlations for each simulated group. If simulating data from a single fixed population matrix in each group, supply a list of those matrices for this argument (if the diagonals contains non-unity values and 'sigma_params' argument is not specified, those values will be used as variances).</p></td>
    </tr>
    <tr>
      <th>mu_params</th>
      <td><p>List containing a list of parameter distributions (or data-generation functions; see details) for means for each simulated group. If <code>NULL</code>, all means will be set to zero.</p></td>
    </tr>
    <tr>
      <th>sigma_params</th>
      <td><p>List containing a list of parameter distributions (or data-generation functions; see details) for standard deviations for each simulated group. If <code>NULL</code>, all standard deviations will be set to unity.</p></td>
    </tr>
    <tr>
      <th>rel_params</th>
      <td><p>List containing a list of parameter distributions (or data-generation functions; see details) for reliabilities for each simulated group. If <code>NULL</code>, all reliabilities will be set to unity.</p></td>
    </tr>
    <tr>
      <th>sr_params</th>
      <td><p>List of parameter distributions (or data-generation functions; see details) for selection ratios. If <code>NULL</code>, all selection ratios will be set to unity.</p></td>
    </tr>
    <tr>
      <th>k_items_params</th>
      <td><p>List of parameter distributions (or data-generation functions; see details) for the number of test items comprising each of the variables to be simulated (all are single-item variables by default).</p></td>
    </tr>
    <tr>
      <th>wt_params</th>
      <td><p>List of parameter distributions (or data-generation functions; see details) to create weights for use in forming composites.
If multiple composites are formed, the list should be a list of lists, with the general format: <code><a href='https://rdrr.io/r/base/list.html'>list(comp1_params = list(...params...), comp2_params = list(...params...), etc.)</a></code>.</p></td>
    </tr>
    <tr>
      <th>allow_neg_wt</th>
      <td><p>Logical scalar that determines whether negative weights should be allowed (<code>TRUE</code>) or not (<code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>sr_composite_params</th>
      <td><p>Parameter distributions (or data-generation functions; see details) for composite selection ratios.</p></td>
    </tr>
    <tr>
      <th>group_names</th>
      <td><p>Optional vector of group names.</p></td>
    </tr>
    <tr>
      <th>var_names</th>
      <td><p>Optional vector of variable names for all non-composite variables.</p></td>
    </tr>
    <tr>
      <th>composite_names</th>
      <td><p>Optional vector of names for composite variables.</p></td>
    </tr>
    <tr>
      <th>diffs_as_obs</th>
      <td><p>Logical scalar that determines whether standard deviation parameters represent standard deviations of observed scores (<code>TRUE</code>) or of true scores (<code>FALSE</code>; default).</p></td>
    </tr>
    <tr>
      <th>show_applicant</th>
      <td><p>Should applicant data be shown for sample statistics (<code>TRUE</code>) or suppressed (<code>FALSE</code>)?</p></td>
    </tr>
    <tr>
      <th>keep_vars</th>
      <td><p>Optional vector of variable names to be extracted from the simulation and returned in the output object. All variables are returned by default. Use this argument when
only some variables are of interest and others are generated solely to serve as selection variables.</p></td>
    </tr>
    <tr>
      <th>decimals</th>
      <td><p>Number of decimals to which statistical results (not parameters) should be rounded. Rounding to 2 decimal places best captures the precision of data available from published primary research.</p></td>
    </tr>
    <tr>
      <th>max_iter</th>
      <td><p>Maximum number of iterations to allow in the parameter selection process before terminating with convergence failure. Must be finite.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A database of simulated primary studies' statistics and analytically determined parameter values.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Values supplied as any argument with the suffix "params" can take any of three forms (see Examples for a demonstration of usage):</p><ul>
<li><p>A vector of values from which study parameters should be sampled.</p></li>
<li><p>A vector containing a mean with a variance or standard deviation. These values must be named "mean," "var," and "sd", respectively, for the program to recognize which value is which.</p></li>
<li><p>A matrix containing a row of values (this row must be named "values") from which study parameters should be sampled and a row of weights (this row must be labeled 'weights') associated
with the values to be sampled.</p></li>
<li><p>A matrix containing a column of values (this column must be named "values") from which study parameters should be sampled and a column of weights (this column must be labeled 'weights') associated
with the values to be sampled.</p></li>
<li><p>A function that is configured to generate data using only one argument that defines the number of cases to generate, e.g., <code>fun(n = 10)</code>.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Define sample sizes, means, and other parameters for each of two groups:</span>
<span class='va'>n_params</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fl'>200</span>, sd <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fl'>100</span>, sd <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>rho_params</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.3</span>, <span class='fl'>.4</span>, <span class='fl'>.5</span><span class='op'>)</span><span class='op'>)</span>,
                   <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.3</span>, <span class='fl'>.4</span>, <span class='fl'>.5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>mu_params</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fl'>.5</span>, sd <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>.5</span>, <span class='fl'>0</span>, <span class='fl'>.5</span><span class='op'>)</span><span class='op'>)</span>,
                  <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>.2</span>, <span class='fl'>0</span>, <span class='fl'>.2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>sigma_params</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>,
                     <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>rel_params</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>.8</span>, <span class='fl'>.8</span><span class='op'>)</span>,
                   <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>.8</span>, <span class='fl'>.8</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>sr_params</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>.5</span><span class='op'>)</span>

<span class='fu'>simulate_d_database</span><span class='op'>(</span>k <span class='op'>=</span> <span class='fl'>5</span>, n_params <span class='op'>=</span> <span class='va'>n_params</span>, rho_params <span class='op'>=</span> <span class='va'>rho_params</span>,
                    mu_params <span class='op'>=</span> <span class='va'>mu_params</span>, sigma_params <span class='op'>=</span> <span class='va'>sigma_params</span>,
                    rel_params <span class='op'>=</span> <span class='va'>rel_params</span>, sr_params <span class='op'>=</span> <span class='va'>sr_params</span>,
                    k_items <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>4</span><span class='op'>)</span>,
                    group_names <span class='op'>=</span> <span class='cn'>NULL</span>, var_names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"y1"</span>, <span class='st'>"y2"</span><span class='op'>)</span>,
                    show_applicant <span class='op'>=</span> <span class='cn'>TRUE</span>, keep_vars <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"y1"</span>, <span class='st'>"y2"</span><span class='op'>)</span>, decimals <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in .simulate_d_sample_params(p_vec = x[["n_vec"]]/sum(x[["n_vec"]]),     rho_mat_list = x[["rho_list"]], mu_mat = x[["mu_mat"]], sigma_mat = x[["sigma_mat"]],     rel_mat = x[["rel_mat"]], sr_vec = x[["sr_vec"]], k_items_vec = x[["k_items_vec"]],     wt_mat = x[["wt_mat"]], sr_composites = x[["sr_composites"]],     group_names = group_names, var_names = var_names, composite_names = composite_names,     show_applicant = TRUE, diffs_as_obs = diffs_as_obs, keep_vars = keep_vars): The package 'nor1mix' is not installed.</span>
#&gt; <span class='error'>  'nor1mix' is required to estimate population parameters under multivariate selection.</span>
#&gt; <span class='error'>  Please install 'nor1mix'.</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jeffrey A. Dahlke, Brenton M. Wiernik.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


